<Window x:Class="MagazAvtoZap.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:system="clr-namespace:System;assembly=mscorlib"
        Title="Магазин автозапчастей" Height="600" Width="1078">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="400" />
        </Grid.ColumnDefinitions>

        <!-- Кнопка выхода из пользователя -->
        <Button Content="Выйти" Grid.Row="0" Grid.ColumnSpan="2" HorizontalAlignment="Right" Margin="10" Padding="10,5" Click="LogoutButton_Click"/>

       
        <Button Content="Обновить список товаров" Grid.Row="0" Grid.Column="0" HorizontalAlignment="Left" Margin="10" Padding="10,5" Click="RefreshProductsButton_Click"/>

        
        <DataGrid x:Name="ProductsDataGrid" AutoGenerateColumns="False" Grid.Row="1" Grid.ColumnSpan="2" Margin="10" IsReadOnly="True">
            <DataGrid.Columns>
                <DataGridTextColumn Header="ID" Binding="{Binding ProductID}" Width="Auto"/>
                <DataGridTextColumn Header="Название" Binding="{Binding Name}" Width="Auto"/>
                <DataGridTextColumn Header="Категория" Binding="{Binding CategoryName}" Width="Auto"/>
                <DataGridTextColumn Header="Поставщик" Binding="{Binding Supplier}" Width="Auto"/>
                <DataGridTextColumn Header="Цена" Binding="{Binding Price}" Width="Auto"/>
                <DataGridTextColumn Header="Остаток" Binding="{Binding StockQuantity}" Width="Auto"/>
                <DataGridTextColumn Header="Описание" Binding="{Binding Description}" Width="*"/>
            </DataGrid.Columns>
        </DataGrid>

        

       
        <Button Content="История продаж" Grid.Row="3" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="322,212,0,0" Click="ShowSalesHistory_Click"/>

        
        <Button x:Name="AdminButton" Content="Администрирование" Grid.Row="2" Grid.Column="1" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="10" Click="AdminButton_Click" Visibility="Collapsed"/>

        <StackPanel Orientation="Horizontal" Grid.Row="1" HorizontalAlignment="Right" VerticalAlignment="Top" Margin="0,8,55,0" Grid.ColumnSpan="2">
            <TextBlock Text="Название товара:" Margin="5"/>
            <TextBox x:Name="ProductNameTextBox" Width="150" Margin="5" ToolTip="Введите название товара"/>
            <TextBlock Text="Количество:" Margin="5"/>
            <TextBox x:Name="QuantityTextBox" Width="50" Margin="5" ToolTip="Введите количество товара"/>
            <Button Content="Добавить в корзину" Click="AddToCartButton_Click" Margin="5"/>
        </StackPanel>

        
        <TextBlock x:Name="TotalPriceTextBlock" Grid.Row="3" Grid.Column="0" Text="Итого: 0 руб." FontWeight="Bold" Margin="322,182,0,0" HorizontalAlignment="Left" VerticalAlignment="Top"/>

        
        <GroupBox Header="Корзина" Grid.Row="3" Margin="565,10,10,10" Height="250" Width="Auto" Grid.ColumnSpan="2">
            <Grid Margin="48,0,0,0">
                <DataGrid x:Name="CartItemsDataGrid" AutoGenerateColumns="False" Margin="-41,5,26,5">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Название" Binding="{Binding Name}"/>
                        <DataGridTextColumn Header="Количество" Binding="{Binding Quantity}"/>
                        <DataGridTextColumn Header="Цена" Binding="{Binding Price}"/>
                        <DataGridTextColumn Header="Сумма" Binding="{Binding TotalPrice, StringFormat='{}{0:C}'}"/>
                        <DataGridTemplateColumn Header="Удалить">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Content="Удалить" Click="RemoveFromCartButton_Click" Tag="{Binding}"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                    </DataGrid.Columns>
                </DataGrid>
                <Button Content="Оформить заказ" Click="CheckoutButton_Click" HorizontalAlignment="Right" Margin="5" Width="120" VerticalAlignment="Bottom"/>
            </Grid>
        </GroupBox>
    </Grid>
</Window>
